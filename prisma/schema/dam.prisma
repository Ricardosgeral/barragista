enum DamMaterial {
    Concrete
    Earthfill
    Masonary
    Mixed
    Other
}

enum DamClass {
    I
    II
    III
    Other
}

model Dam {
    //general data
    id                   String      @id @default(cuid())
    name                 String      @unique
    class                DamClass?
    material             DamMaterial
    structure            String //gravity , rockfill, arch, zoned earthfill... 
    description          String?
    usages               String[]
    owner                String?
    promotor             String?
    builder              String?
    designer             String?
    project_year         String?
    completion_year      String?
    database_creation    DateTime    @default(now())
    //localization
    country              String
    state                String
    city                 String
    local                String?
    hydro_basin          String?
    water_line           String?
    latitude             Float?
    longitude            Float?
    //HydroFeatures
    watershed_area       BigInt?
    average_annual_prec  Int?
    flood_flow           Int?
    average_annual_flow  BigInt?
    return_period        Int?
    //Reservoir Features
    flood_area           BigInt?
    total_capacity       BigInt?
    useful_capacity      BigInt?
    dead_volume          BigInt?
    fsl                  Int?
    mfl                  Int?
    mol                  Int?
    // Dam Features
    height_to_foundation Int?
    height_to_natural    Int?
    crest_elevation      Float?
    crest_length         Int?
    crest_width          Float?
    embankment_volume    BigInt?
    concrete_volume      BigInt?

    //Geology and foundation treatment
    foundation_geology   String?
    foundation_treatment String?

    //BottomDischarge
    has_btd        Boolean @default(true)
    btd_number     Int?
    btd_local      String?
    btd_type       String?
    btd_section    String?
    btd_diameter   Float?
    btd_maxflow    Float?
    btd_upstream   String?
    btd_downstream String?
    btd_energy     String?
    btd_more       String?

    //Spillway
    has_spillway            Boolean @default(true)
    spillway_number         Int?
    spillway_local          String?
    spillway_type           String?
    spillway_floodgates     String?
    spillway_sill_elevation Float?
    spillway_sill_length    Float?
    spillway_maxflow        Int?
    spillway_energy         String?
    spillway_more           String?

    //Hydroeletrical central
    has_hydropower  Boolean @default(false)
    hp_local        String?
    hp_group_type   String?
    hp_power        Int?
    hp_anual_energy Int?
    hp_more         String?

    //ecological circuit
    has_eco_circuit Boolean @default(true)
    ecocirc_flow    Int?
    ecocirc_more    String?

    notes String?

    // files
    damFiles    DamFile[]
    cover_image Int       @default(0) //image that will show in the initial view. by default will be File[0]

    //user that creates the dam
    user   User?   @relation(fields: [userId], references: [id], onDelete: SetNull)
    userId String? @map("user_id")

    @@index([name, structure, userId])
    @@map("dams")
}

enum FileType {
    Draw
    Image
    Other
}

model DamFile {
    id    String   @id @default(cuid())
    type  FileType
    label String //Description, like: plant, cros section, spillway, ....
    dam   Dam      @relation(fields: [damId], references: [id])
    damId String

    @@index([damId])
    @@map("damFiles")
}
